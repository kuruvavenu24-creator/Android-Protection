<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PDFShield Pro</title>

<style>
body {
    margin: 0;
    font-family: 'Courier New', monospace;
    background: linear-gradient(135deg,#000,#0f2027);
    color: #00ffcc;
    text-align: center;
    padding: 30px;
}

.glitch {
    font-size: 32px;
    animation: glow 1.5s infinite alternate;
}

@keyframes glow {
    from { text-shadow: 0 0 5px #00ffcc; }
    to { text-shadow: 0 0 20px #00ffcc,0 0 40px #00ffcc; }
}

.container {
    max-width: 750px;
    margin: auto;
    background: #111;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 0 25px #00ffcc;
}

.drop-zone {
    border: 2px dashed #00ffcc;
    padding: 35px;
    border-radius: 15px;
    cursor: pointer;
}

input[type="file"] { display: none; }

button {
    margin-top: 12px;
    padding: 10px 20px;
    background: #00ffcc;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
}

button:hover { background: #00ccaa; }

#terminal {
    background: black;
    height: 120px;
    margin-top: 15px;
    padding: 10px;
    overflow-y: auto;
    text-align: left;
    border: 1px solid #00ffcc;
}

.progress-container {
    background: #222;
    border-radius: 10px;
    margin-top: 15px;
}

.progress-bar {
    height: 20px;
    width: 0%;
    border-radius: 10px;
    transition: width 0.5s;
}

.safe { background: lime; }
.warning { background: orange; }
.danger { background: red; }

/* History Section */
.history {
    margin-top: 25px;
    text-align: left;
    background: #0a0a0a;
    padding: 15px;
    border-radius: 10px;
    max-height: 200px;
    overflow-y: auto;
}

.history-item {
    border-bottom: 1px solid #333;
    padding: 5px 0;
    font-size: 14px;
}

.clear-btn {
    background: red;
    color: white;
}
</style>
</head>

<body>

<h1 class="glitch">ðŸ›¡ PDFShield Pro</h1>

<div class="container">

    <div class="drop-zone" onclick="document.getElementById('pdfInput').click()">
        ðŸ“‚ Click to Upload PDF
        <input type="file" id="pdfInput" accept=".pdf">
        <div id="fileName"></div>
    </div>

    <button onclick="scanPDF()">Start Scan</button>
    <button class="clear-btn" onclick="clearHistory()">Clear History</button>

    <div id="terminal"></div>

    <div class="progress-container">
        <div id="progressBar" class="progress-bar"></div>
    </div>

    <h3 id="riskResult"></h3>

    <div class="history">
        <h3>ðŸ“œ Scan History</h3>
        <div id="historyList"></div>
    </div>

</div>

<script>
const pdfInput = document.getElementById("pdfInput");
const fileName = document.getElementById("fileName");
const historyList = document.getElementById("historyList");

pdfInput.addEventListener("change", function () {
    if (this.files.length > 0) {
        fileName.innerText = "Selected: " + this.files[0].name;
    }
});

function scanPDF() {
    const file = pdfInput.files[0];
    if (!file) return alert("Upload PDF first!");

    const terminal = document.getElementById("terminal");
    const progressBar = document.getElementById("progressBar");
    const riskResult = document.getElementById("riskResult");

    terminal.innerHTML = "";
    progressBar.style.width = "0%";
    riskResult.innerHTML = "";

    let progress = 0;

    const scan = setInterval(() => {
        progress += 10;
        terminal.innerHTML += "Scanning block " + progress/10 + "... OK<br>";
        terminal.scrollTop = terminal.scrollHeight;

        if (progress >= 100) {
            clearInterval(scan);
            analyze(file);
        }
    }, 250);
}

function analyze(file) {

    const progressBar = document.getElementById("progressBar");
    const riskResult = document.getElementById("riskResult");

    let risk = 5;

    if (file.size > 5 * 1024 * 1024) risk += 25;

    const suspicious = ["invoice","urgent","bank","crypto","password"];
    suspicious.forEach(word => {
        if (file.name.toLowerCase().includes(word)) {
            risk += 15;
        }
    });

    let status = "SAFE";

    if (risk < 30) {
        progressBar.className = "progress-bar safe";
        status = "SAFE";
    } else if (risk < 60) {
        progressBar.className = "progress-bar warning";
        status = "SUSPICIOUS";
    } else {
        progressBar.className = "progress-bar danger";
        status = "HIGH RISK";
    }

    progressBar.style.width = risk + "%";
    riskResult.innerHTML = status + " â€“ Risk Score: " + risk + "%";

    saveHistory(file.name, risk, status);
}

function saveHistory(name, risk, status) {

    const time = new Date().toLocaleString();

    const record = { name, risk, status, time };

    let history = JSON.parse(localStorage.getItem("scanHistory")) || [];
    history.unshift(record);

    localStorage.setItem("scanHistory", JSON.stringify(history));

    loadHistory();
}

function loadHistory() {

    let history = JSON.parse(localStorage.getItem("scanHistory")) || [];

    historyList.innerHTML = "";

    history.forEach(item => {
        historyList.innerHTML += `
        <div class="history-item">
        ðŸ“‚ ${item.name} | ${item.status} (${item.risk}%)<br>
        ðŸ•’ ${item.time}
        </div>`;
    });
}

function clearHistory() {
    localStorage.removeItem("scanHistory");
    loadHistory();
}

loadHistory();
</script>

</body>
</html>